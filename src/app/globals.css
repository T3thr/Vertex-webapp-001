/* src/app/global.css - Optimized for Performance */

@import "tailwindcss";

/* Critical animations only - optimized for performance */
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}

/* --------------------------------------- */
/* การกำหนดตัวแปรพื้นฐานสำหรับ Light Theme (ค่าเริ่มต้น) */
/* --------------------------------------- */
:root {
  --background: #ffffff; /* White */
  --foreground: #111827; /* Cool Gray 900 */
  --primary: #5495ff; /* Blue */
  --primary-hover: #3c7df0; /* สีเข้มขึ้นเล็กน้อยสำหรับ hover */
  --primary-foreground: #ffffff; /* White */
  --secondary: #eaeff8; /* Light Gray */
  --secondary-foreground: #1f2937; /* Cool Gray 800 */
  --accent: #a5b4fc; /* Indigo 300 */
  --accent-foreground: #111827; /* Text color for on accent backgrounds */
  --muted: #707b90; /* Muted Gray */
  --muted-foreground: #9ca3af; /* Cool Gray 400 */
  --card: #ffffff; /* White */
  --card-foreground: #111827; /* Cool Gray 900 */
  --border: #e5e7eb; /* Cool Gray 200 */
  --input: #f3f4f6; /* Cool Gray 100 */
  --input-border: #d1d5db; /* Cool Gray 300 for input borders */
  --ring: #60a5fa; /* Blue 400 */
  --popover: #ffffff; /* White */
  --popover-foreground: #111827;

  --alert-error: #fef2f2; /* Red 50 */
  --alert-error-foreground: #b91c1c; /* Red 700 */
  --alert-error-border: #fecaca; /* Red 300 */
  --alert-success: #f0fdf4; /* Green 50 */
  --alert-success-foreground: #15803d; /* Green 700 */
  --alert-success-border: #bbf7d0; /* Green 300 */

  --font-sans: var(--font-geist-sans, ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");
  --font-mono: var(--font-geist-mono, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace);

  --container-padding: 1rem; /* 16px */
  --container-padding-sm: 1.5rem; /* 24px for sm screens and up */
  --container-padding-lg: 2rem; /* 32px for lg screens and up */
  --container-max-width: 80rem; /* 1280px, สามารถปรับตามต้องการ */

  --animation-fast: 150ms;
  --animation-normal: 300ms;
  --animation-slow: 500ms;

  --radius-sm: 0.25rem; /* 4px */
  --radius-md: 0.375rem; /* 6px */
  --radius-lg: 0.5rem;  /* 8px */
  --radius-xl: 0.75rem; /* 12px */
  --radius-2xl: 1rem; /* 16px */
  --radius-full: 9999px;

  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
  --shadow-inner: inset 0 2px 4px 0 rgb(0 0 0 / 0.05); /* เพิ่ม shadow-inner */

  --social-button-bg: #f3f4f6; /* Cool Gray 100 */
  --social-button-google: #db4437; /* Google Red */
  --social-button-hover: #e5e7eb; /* Cool Gray 200 */
  --social-button-text: #1f2937; /* Cool Gray 800 */

  --modal-gradient-start: var(--primary);
  --modal-gradient-end: #60a5fa; /* Blue 400 */
}

/* --------------------------------------- */
/* รูปแบบสำหรับโหมดมืด (Dark Theme) */
/* --------------------------------------- */
.dark {
  --background: #0f172a; /* Slate 900 */
  --foreground: #f8fafc; /* Slate 50 */
  --primary: #60a5fa; /* Blue 400 */
  --primary-hover: #3b82f6; /* Blue 500 */
  --primary-foreground: #0f172a; /* Slate 900 */
  --secondary: #1a2841; /* Slate (เข้มกว่า card) */
  --secondary-foreground: #e2e8f0; /* Slate 200 */
  --accent: #334155; /* Slate 700 */
  --accent-foreground: #f8fafc;
  --muted: #475569; /* Slate 600 */
  --muted-foreground: #94a3b8; /* Slate 400 */
  --card: #1e293b; /* Slate 800 */
  --card-foreground: #f1f5f9; /* Slate 100 */
  --border: #334155; /* Slate 700 */
  --input: #283345; /* Slate 800 */
  --input-border: #475569; /* Slate 600 for input borders */
  --ring: #3b82f6; /* Blue 500 */
  --popover: #334175; /* Slate (ปรับให้เข้มกว่า) */
  --popover-foreground: #f8fafc;

  --alert-error: #3f1212; /* Dark Red */
  --alert-error-foreground: #fca5a5; /* Red 300 */
  --alert-error-border: #7f1d1d; /* Red 800 */
  --alert-success: #062f17; /* Dark Green */
  --alert-success-foreground: #a7f3d0; /* Green 300 */
  --alert-success-border: #14532d; /* Green 800 */

  --social-button-bg: #1e293b; /* Slate 800 */
  --social-button-hover: #334155; /* Slate 700 */
  --social-button-text: #e2e8f0; /* Slate 200 */

  --modal-gradient-start: var(--primary);
  --modal-gradient-end: #93c5fd; /* Blue 300 */
}

/* --------------------------------------- */
/* รูปแบบสำหรับโหมดซีเปีย (Sepia Theme) */
/* --------------------------------------- */
.sepia {
  --background: #f6ebdb; /* Sepia Background */
  --foreground: #4a3b31; /* Sepia Foreground */
  --primary: #8c6f56; /* Sepia Primary */
  --primary-hover: #785b42; /* Sepia Darker */
  --primary-foreground: #e9dfbf; /* Sepia Light */
  --secondary: #cfc0a8; /* Sepia Secondary */
  --secondary-foreground: #5a4b41; /* Sepia Dark */
  --accent: #b89d83; /* Sepia Accent */
  --accent-foreground: #4a3b31;
  --muted: #9c8b7c; /* Sepia Muted */
  --muted-foreground: #6b5a4d; /* Sepia Muted Foreground */
  --card: #e9d3af; /* Sepia Card */
  --card-foreground: #4a3b31; /* Sepia Foreground */
  --border: #d3c1ad; /* Sepia Border */
  --input: #e9dfcf; /* Sepia Input */
  --input-border: #b89d83;
  --ring: #a0846c; /* Sepia Ring */
  --popover: #f6ebdb; /* Sepia Background */
  --popover-foreground: #4a3b31;

  --alert-error: #f0e0e0; /* Sepia Error */
  --alert-error-foreground: #8c5353; /* Sepia Error Foreground */
  --alert-error-border: #e6c9c9; /* Sepia Error Border */
  --alert-success: #e0f0e0; /* Sepia Success */
  --alert-success-foreground: #538c53; /* Sepia Success Foreground */
  --alert-success-border: #c9e6c9; /* Sepia Success Border */

  --social-button-bg: #e9dfcf; /* Sepia Button */
  --social-button-hover: #d3c1ad; /* Sepia Button Hover */
  --social-button-text: #5a4b41; /* Sepia Button Text */

  --modal-gradient-start: var(--primary);
  --modal-gradient-end: #a98e74; /* Sepia Gradient End */
  filter: sepia(0.1); /* ลดค่า sepia ลงเล็กน้อยเพื่อไม่ให้สีเพี้ยนมากเกินไป */
}

/* --------------------------------------- */
/* การกำหนดธีมสำหรับ Tailwind CSS 4.0+ */
/* --------------------------------------- */
@theme {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-primary: var(--primary);
  --color-primary-hover: var(--primary-hover); /* เพิ่มสำหรับ hover state */
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-input-border: var(--input-border); /* เพิ่มสำหรับ input border */
  --color-ring: var(--ring);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);

  --color-alert-error: var(--alert-error);
  --color-alert-error-foreground: var(--alert-error-foreground);
  --color-alert-error-border: var(--alert-error-border);
  --color-alert-success: var(--alert-success);
  --color-alert-success-foreground: var(--alert-success-foreground);
  --color-alert-success-border: var(--alert-success-border);

  --font-family-sans: var(--font-sans);
  --font-family-mono: var(--font-mono);

  --spacing-container-padding: var(--container-padding);
  --spacing-container-padding-sm: var(--container-padding-sm);
  --spacing-container-padding-lg: var(--container-padding-lg);

  --size-container-max-width: var(--container-max-width);

  --duration-animation-fast: var(--animation-fast);
  --duration-animation-normal: var(--animation-normal);
  --duration-animation-slow: var(--animation-slow);

  --border-radius-sm: var(--radius-sm);
  --border-radius-md: var(--radius-md);
  --border-radius-lg: var(--radius-lg);
  --border-radius-xl: var(--radius-xl);
  --border-radius-2xl: var(--radius-2xl);
  --border-radius-full: var(--radius-full);

  --box-shadow-sm: var(--shadow-sm);
  --box-shadow-md: var(--shadow-md);
  --box-shadow-lg: var(--shadow-lg);
  --box-shadow-xl: var(--shadow-xl);
  --box-shadow-inner: var(--shadow-inner);

  --color-social-button-bg: var(--social-button-bg);
  --color-social-button-google: var(--social-button-google);
  --color-social-button-hover: var(--social-button-hover);
  --color-social-button-text: var(--social-button-text);

  --color-modal-gradient-start: var(--modal-gradient-start);
  --color-modal-gradient-end: var(--modal-gradient-end);
}

/* --------------------------------------- */
/* การกำหนดสไตล์พื้นฐานสำหรับ body */
/* --------------------------------------- */
body {
  background-color: var(--color-background); /* Tailwind จะใช้ bg-background จาก @theme */
  color: var(--color-foreground); /* Tailwind จะใช้ text-foreground จาก @theme */
  font-family: var(--font-sans);
  font-size: 16px; /* 1rem */
  line-height: 1.625; /* เพิ่ม line-height เล็กน้อย */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility; /* ปรับปรุงการแสดงผลตัวอักษร */
  overflow-x: hidden; /* ป้องกัน horizontal scroll ที่ไม่ต้องการบน body */
}

/* --------------------------------------- */
/* คลาสยูทิลิตี้สำหรับ container */
/* --------------------------------------- */
.container-custom {
  width: 100%;
  max-width: var(--size-container-max-width); /* ใช้ตัวแปรจาก @theme */
  margin-left: auto;
  margin-right: auto;
  padding-left: 3rem; /* เพิ่ม padding จาก 1rem เป็น 2rem */
  padding-right: 3rem;
}

@media (min-width: 640px) { /* sm breakpoint (Tailwind default) */
  .container-custom {
    padding-left: 4rem; /* เพิ่ม padding จาก 1.5rem เป็น 3rem */
    padding-right: 4rem;
  }
}

@media (min-width: 1024px) { /* lg breakpoint (Tailwind default) */
  .container-custom {
    padding-left: 5rem; /* เพิ่ม padding จาก 2rem เป็น 4rem */
    padding-right: 5rem;
  }
}

/* --------------------------------------- */
/* คลาสสำหรับแอนิเมชั่น */
/* --------------------------------------- */
.animate-fadeIn {
  animation: fadeIn var(--duration-animation-normal) ease-in-out;
}

/* --------------------------------------- */
/* การปรับแต่ง Scrollbar */
/* --------------------------------------- */
/* For Webkit browsers (Chrome, Safari, Edge Chromium) */
::-webkit-scrollbar {
  width: 10px; /* ความกว้างของ scrollbar แนวตั้ง */
  height: 10px; /* ความสูงของ scrollbar แนวนอน */
}

::-webkit-scrollbar-track {
  background: var(--secondary);
  border-radius: var(--border-radius-full);
}

::-webkit-scrollbar-thumb {
  background: var(--accent);
  border-radius: var(--border-radius-full);
  border: 2px solid var(--secondary); /* สร้างเอฟเฟกต์ padding รอบ thumb */
}

::-webkit-scrollbar-thumb:hover {
  background: color-mix(in srgb, var(--accent) 80%, var(--foreground) 20%); /* ทำให้สีเข้มขึ้นเมื่อ hover */
}

/* For Firefox */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--accent) var(--secondary);
}

/* Utility class สำหรับ scrollbar แบบกำหนดเอง */
.custom-scrollbar::-webkit-scrollbar {
  width: 6px; /* ความกว้างสำหรับ scrollbar แบบกำหนดเอง */
  height: 6px; /* ความสูงสำหรับ scrollbar แบบกำหนดเอง */
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background-color: var(--primary);
  border-radius: var(--border-radius-full);
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background-color: var(--primary-hover);
}

.custom-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: var(--primary) var(--secondary);
}

/* Panel scrollbar styles */
.scrollbar-thin::-webkit-scrollbar {
  width: 6px;
}

.scrollbar-thin::-webkit-scrollbar-track {
  background: #f3f4f6;
  border-radius: 3px;
}

.scrollbar-thin::-webkit-scrollbar-thumb {
  background: #d1d5db;
  border-radius: 3px;
}

.scrollbar-thin::-webkit-scrollbar-thumb:hover {
  background: #9ca3af;
}

/* Dark mode panel scrollbar */
.dark .scrollbar-thin::-webkit-scrollbar-track {
  background: #374151;
}

.dark .scrollbar-thin::-webkit-scrollbar-thumb {
  background: #6b7280;
}

.dark .scrollbar-thin::-webkit-scrollbar-thumb:hover {
  background: #9ca3af;
}

/* --------------------------------------- */
/* สไตล์เมื่อโฟกัส */
/* --------------------------------------- */
*:focus-visible {
  outline: 2px solid var(--ring);
  outline-offset: 2px;
  border-radius: var(--border-radius-sm); /* เพิ่ม border-radius ให้ outline ดูดีขึ้น */
  box-shadow: 0 0 0 4px rgb(var(--ring) / 0.2); /* เพิ่ม glow effect */
}

/* ไม่แสดง outline เมื่อ focus แต่ไม่ใช่ :focus-visible */
*:focus:not(:focus-visible) {
  outline: none;
}

/* --------------------------------------- */
/* ป้องกัน Flash of Unstyled Content (FOUC) */
/* --------------------------------------- */
html {
  visibility: hidden; /* Hide by default to prevent FOUC */
}

html[data-theme-ready="true"] {
  visibility: visible; /* Show once the script has set the theme */
}

/* --------------------------------------- */
/* Text Shadow Utilities */
/* --------------------------------------- */
.shadow-text-sm {
  text-shadow: 0 1px 2px rgb(0 0 0 / 0.25);
}

.shadow-text-md {
  text-shadow: 0 2px 4px rgb(0 0 0 / 0.3);
}

/* --------------------------------------- */
/* Dashboard Layout Utilities - ไม่บดบัง navbar/footer และลบช่องว่างล่าง */
/* --------------------------------------- */

/* Dashboard Container - จำกัดขอบเขตไม่ให้ทับ navbar/footer */
.dashboard-container {
  position: relative;
  min-height: calc(100vh - 8rem); /* navbar (4rem) + footer (4rem) */
  margin-top: 0; /* ไม่เว้นระยะจาก navbar */
  background: hsl(var(--background));
}

/* Analytics Tab - ลบช่องว่างด้านล่างทั้งหมด */
.analytics-tab-content {
  padding-bottom: 0 !important;
  margin-bottom: 0 !important;
}

.analytics-tab-content > div:last-child {
  margin-bottom: 0 !important;
  padding-bottom: 0 !important;
}

/* Remove all bottom gaps in analytics tab */
.analytics-tab-content * {
  margin-bottom: 0 !important;
}

.analytics-tab-content > *:last-child {
  padding-bottom: 0 !important;
}

/* Fix for analytics tab bottom spacing */
.analytics-tab-content .motion-div:last-child {
  margin-bottom: 0 !important;
  padding-bottom: 0 !important;
}

/* Ensure no extra space after last element */
.analytics-tab-content > motion-div:last-child,
.analytics-tab-content > div:last-child,
.analytics-tab-content > section:last-child {
  margin-bottom: 0 !important;
  padding-bottom: 0 !important;
}

/* Mobile Menu Button */
.dashboard-mobile-menu {
  position: fixed;
  top: 6rem; /* ใต้ navbar */
  left: 1rem;
  z-index: 40;
  background: hsl(var(--background) / 0.9);
  backdrop-filter: blur(8px);
  border: 1px solid hsl(var(--border));
  border-radius: 0.5rem;
  box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1);
  transition: all 0.2s ease-in-out;
}

.dashboard-mobile-menu:hover {
  background: hsl(var(--secondary));
  transform: scale(1.05);
}

/* Sidebar Layout */
.dashboard-sidebar-container {
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  background: hsl(var(--card) / 0.95);
  backdrop-filter: blur(8px);
  border-right: 1px solid hsl(var(--border));
  box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25);
  overflow: hidden;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Content Area */
.dashboard-content-area {
  transition: margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  min-height: calc(100vh - 8rem);
}

/* Mobile Overlay */
.dashboard-overlay {
  position: fixed;
  top: 4rem; /* ใต้ navbar */
  bottom: 4rem; /* เหนือ footer */
  left: 0;
  right: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 30;
}

/* Responsive Adjustments */
@media (max-width: 1023px) {
  .dashboard-content-area {
    padding: 1rem;
    padding-top: 1rem;
  }
}

@media (min-width: 1024px) {
  .dashboard-content-area {
    padding: 1.5rem;
    padding-top: 1.5rem;
  }
}

/* Animation Utilities */
.dashboard-fade-in {
  animation: dashboardFadeIn 0.3s ease-in-out;
}

@keyframes dashboardFadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* --------------------------------------- */
/* Novel Row Utilities - ✅ [เพิ่มใหม่] สำหรับ horizontal scrolling และ navigation */
/* --------------------------------------- */

/* Novel Row Navigation Utilities - ✅ [ปรับปรุง] Smart Arrows */
.novel-row-container {
  position: relative;
  width: 100%;
}

.novel-row-scroll {
  overflow-x: auto;
  overflow-y: hidden;
  scroll-behavior: smooth;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none; /* Firefox - ซ่อน scrollbar */
  -ms-overflow-style: none; /* IE/Edge - ซ่อน scrollbar */
}

.novel-row-scroll::-webkit-scrollbar {
  display: none; /* Webkit - ซ่อน scrollbar */
}

.novel-cards-grid {
  display: flex;
  gap: 0.75rem;
  padding: 0.5rem 0;
}

.novel-card-item {
  flex: 0 0 auto;
  scroll-snap-align: start;
}

/* Custom horizontal scrollbar for novel rows */
.custom-scrollbar-horizontal {
  scrollbar-width: none; /* ซ่อน scrollbar ใน Firefox */
  -ms-overflow-style: none; /* ซ่อน scrollbar ใน IE/Edge */
}

.custom-scrollbar-horizontal::-webkit-scrollbar {
  display: none; /* ซ่อน scrollbar ใน Chrome, Safari, และ Opera */
}

.novel-row-nav-button {
  position: absolute;
  top: 50%;
  z-index: 15;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(8px);
  border: 1px solid rgba(255, 255, 255, 0.8);
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
  /* ✅ ไม่มี transition สำหรับ hover ตามที่ขอ */
  transition: opacity 0.2s ease-in-out;
}

/* ✅ ไม่มี hover effects */
.novel-row-nav-button:active {
  transform: translateY(-50%) scale(0.95);
}

.novel-row-nav-left {
  left: -20px;
}

.novel-row-nav-right {
  right: -20px;
}

/* Dark theme support */
.dark .novel-row-nav-button {
  background: rgba(30, 30, 30, 0.95);
  border-color: rgba(255, 255, 255, 0.15);
}

/* ✅ [เพิ่มใหม่] Dark theme support สำหรับ view-more-circle */
.dark .view-more-circle {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3), 0 2px 6px rgba(0, 0, 0, 0.2); /* ✅ เงาเข้มขึ้นสำหรับ dark theme */
}

.dark .view-more-circle:hover {
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4), 0 4px 12px rgba(0, 0, 0, 0.25); /* ✅ เงา hover เข้มขึ้นสำหรับ dark theme */
}

/* ✅ [เพิ่มใหม่] Dark theme responsive shadows */
@media (max-width: 1024px) {
  .dark .view-more-circle {
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.35), 0 2px 5px rgba(0, 0, 0, 0.25);
  }
  
  .dark .view-more-circle:hover {
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.45), 0 3px 10px rgba(0, 0, 0, 0.3);
  }
}

@media (max-width: 768px) {
  .dark .view-more-circle {
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.35), 0 1px 4px rgba(0, 0, 0, 0.25);
  }
  
  .dark .view-more-circle:hover {
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.45), 0 3px 8px rgba(0, 0, 0, 0.3);
  }
}

@media (max-width: 480px) {
  .dark .view-more-circle {
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.35), 0 1px 3px rgba(0, 0, 0, 0.25);
  }
  
  .dark .view-more-circle:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.45), 0 2px 6px rgba(0, 0, 0, 0.3);
  }
}

/* Novel Editor Styles */
.bg-grid-pattern {
  background-image: 
    linear-gradient(hsl(var(--border)) 1px, transparent 1px),
    linear-gradient(90deg, hsl(var(--border)) 1px, transparent 1px);
  background-size: 20px 20px;
}

/* Novel Editor Responsive Styles */
.canvas-content {
  width: 100%;
  height: 100%;
}

/* Blueprint Tab Responsive */
.blueprint-canvas {
  width: 100%;
  height: 100%;
  overflow: hidden;
}

.blueprint-sidebar {
  transition: transform 0.3s ease-in-out;
}

.blueprint-properties {
  transition: transform 0.3s ease-in-out;
}

/* Director Tab Responsive */
.director-canvas {
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: relative;
}

.director-timeline {
  transition: transform 0.3s ease-in-out;
}

.visual-novel-preview {
  aspect-ratio: 16/9;
  max-width: 100%;
  max-height: 100%;
  margin: 0 auto;
}

/* Mobile Responsive (< 768px) */
@media (max-width: 767px) {
  .novel-editor-mobile .canvas-content {
    padding: 4px;
  }
  
  .novel-editor-mobile .node-palette-item {
    padding: 6px;
  }
  
  .novel-editor-mobile .properties-panel {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: 50vh;
    z-index: 50;
    border-radius: 12px 12px 0 0;
  }

  /* Blueprint Mobile */
  .blueprint-sidebar {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 280px;
    z-index: 40;
    transform: translateX(-100%);
  }
  
  .blueprint-sidebar.open {
    transform: translateX(0);
  }

  .blueprint-properties {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    width: 280px;
    z-index: 40;
    transform: translateX(100%);
  }
  
  .blueprint-properties.open {
    transform: translateX(0);
  }

  /* Director Mobile */
  .director-timeline {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: 200px;
    z-index: 30;
    transform: translateY(100%);
  }
  
  .director-timeline.open {
    transform: translateY(0);
  }

  .visual-novel-preview {
    width: 100%;
    height: auto;
    max-height: 60vh;
  }

  /* Mobile Canvas Controls */
  .canvas-controls-mobile {
    position: fixed;
    bottom: 20px;
    right: 20px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    z-index: 30;
  }

  /* Touch-friendly buttons */
  .touch-button {
    min-height: 44px;
    min-width: 44px;
    padding: 12px;
  }
}

/* Tablet Responsive (768px - 1023px) */
@media (min-width: 768px) and (max-width: 1023px) {
  .novel-editor-tablet .properties-panel {
    width: 300px;
  }

  .novel-editor-tablet .sidebar-panel {
    width: 300px;
  }

  .visual-novel-preview {
    width: 90%;
    height: auto;
    max-height: 70vh;
  }

  /* Tablet Canvas */
  .blueprint-canvas,
  .director-canvas {
    padding: 8px;
  }

  /* Tablet Timeline */
  .director-timeline {
    height: 180px;
  }
}

/* Desktop Responsive (>= 1024px) */
@media (min-width: 1024px) {
  .visual-novel-preview {
    width: 1280px;
    height: 720px;
    max-width: 90vw;
    max-height: 60vh;
  }

  /* Desktop panels */
  .blueprint-sidebar,
  .blueprint-properties {
    width: 320px;
  }

  .director-timeline {
    height: 240px;
  }
}

/* Large Desktop (>= 1440px) */
@media (min-width: 1440px) {
  .visual-novel-preview {
    width: 1600px;
    height: 900px;
    max-width: 85vw;
    max-height: 65vh;
  }

  .blueprint-sidebar,
  .blueprint-properties {
    width: 360px;
  }

  .director-timeline {
    height: 280px;
  }
}

/* Ultra-wide (>= 1920px) */
@media (min-width: 1920px) {
  .visual-novel-preview {
    width: 1920px;
    height: 1080px;
    max-width: 80vw;
    max-height: 70vh;
  }
}

/* Touch Device Optimizations */
@media (hover: none) and (pointer: coarse) {
  /* Touch-specific styles */
  .draggable-element {
    touch-action: none;
  }

  .canvas-zoom-controls {
    display: flex;
    gap: 12px;
  }

  .touch-zoom-button {
    min-height: 48px;
    min-width: 48px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Larger hit targets for mobile */
  .node-handle {
    min-width: 20px;
    min-height: 20px;
  }

  .element-resize-handle {
    min-width: 24px;
    min-height: 24px;
  }
}

/* High DPI Displays */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 2dppx) {
  .visual-novel-preview {
    image-rendering: -webkit-optimize-contrast;
  }
}

/* Dark Mode Responsive Adjustments */
.dark .visual-novel-preview {
  border-color: rgba(255, 255, 255, 0.2);
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
}

/* Animation Performance */
@media (prefers-reduced-motion: reduce) {
  .blueprint-sidebar,
  .blueprint-properties,
  .director-timeline {
    transition: none;
  }
}

/* Print Styles */
@media print {
  .novel-editor-container {
    display: none;
  }
}

.canvas-content {
  transform-origin: 0 0;
}

/* Mobile Novel Editor Adjustments */
@media (max-width: 768px) {
  .novel-editor-mobile .canvas-content {
    transform: scale(0.7);
  }
  
  .novel-editor-mobile .node-palette-item {
    padding: 0.5rem;
  }
  
  .novel-editor-mobile .properties-panel {
    font-size: 0.875rem;
  }
}

/* Responsive adjustments */
@media (max-width: 1280px) {
  .novel-row-nav-left {
    left: -15px;
  }
  
  .novel-row-nav-right {
    right: -15px;
  }
}

@media (max-width: 1024px) {
  .novel-row-nav-button {
    display: none; /* ซ่อนบน tablet และ mobile */
  }
}

/* Section Header Utilities - ✅ [เพิ่มใหม่] รองรับรูปภาพในอนาคต */
.section-header {
  position: relative;
  border-radius: var(--border-radius-lg);
  overflow: hidden;
  transition: all 0.3s ease-in-out;
}

.section-header-with-image {
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  min-height: 120px;
}

.section-header-overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, 
    hsl(var(--background) / 0.95) 0%, 
    hsl(var(--background) / 0.85) 50%, 
    hsl(var(--background) / 0.9) 100%
  );
  backdrop-filter: blur(2px);
}

.section-header-content {
  position: relative;
  z-index: 2;
  padding: 1rem;
}

/* Asymmetrical Grid Utilities - ✅ [ปรับปรุงให้การ์ด grid เท่ากับ section อื่น] สำหรับ section แรก */
.featured-grid {
  display: grid;
  grid-template-columns: 3fr 2fr; /* สัดส่วน 60%:40% */
  gap: 0.8rem; /* ระยะห่างระหว่างกล่องซ้ายและขวา */
  align-items: stretch;
  justify-content: space-between; /* ให้ชิดขอบทั้งสองข้าง */
  max-width: 100%; /* ใช้พื้นที่เต็มที่ */
  margin: 0;
  min-height: 500px; /* เพิ่มความสูงให้มากขึ้น */
  padding: 0;
}

.featured-main {
  grid-column: 1 / 2;
  display: flex;
  align-items: stretch;
  justify-content: flex-start; /* ให้การ์ดหลักชิดซ้าย */
  height: 100%;
}

.featured-main .novel-card {
  width: 100%;
  height: 100%;
  min-width: 450px; /* ความกว้างขั้นต่ำ */
  min-height: 500px; /* เพิ่มความสูงให้มากขึ้น */
  max-width: 650px; /* ความกว้างสูงสุด */
  max-height: 550px; /* เพิ่มความสูงสูงสุด */
}

.featured-side {
  grid-column: 2 / 3;
  display: grid;
  grid-template-columns: 1fr 1fr; /* Grid 2x2 */
  grid-template-rows: 1fr 1fr;
  gap: 0.75rem; /* ระยะห่างระหว่างการ์ด */
  height: 100%;
  align-items: stretch;
  justify-content: end; /* ให้การ์ดฝั่งขวาชิดขวา */
  position: relative;
}

/* การ์ดด้านขวา */
.featured-side .novel-card {
  width: 100%;
  height: 100%;
  min-width: 160px; /* ความกว้างขั้นต่ำ */
  max-width: 220px; /* ความกว้างสูงสุด */
  min-height: 230px; /* เพิ่มความสูงให้มากขึ้น */
  max-height: 270px; /* เพิ่มความสูงสูงสุด */
}

/* ✅ [ปรับใหม่] ปุ่มดูเพิ่มเติมให้อยู่ใต้ grid 2x2 แบบสมมาตร */
.featured-side .view-more-button-container {
  position: absolute;
  bottom: -3rem; /* ✅ วางใต้ grid 2x2 */
  left: 50%;
  transform: translateX(-50%); /* ✅ จัดกึ่งกลางแนวนอน */
  z-index: 10;
}

.featured-side .view-more-circle {
  width: 50px; /* ✅ [ลดจาก 60px เป็น 50px] ให้เหมาะสมกับตำแหน่งใหม่ */
  height: 50px;
  margin: 0;
}

/* ✅ [เพิ่มใหม่] เพิ่มพื้นที่ด้านล่าง featured section สำหรับปุ่มดูเพิ่มเติม */
.featured-section-wrapper {
  margin-bottom: 4rem; /* ✅ เพิ่มพื้นที่ด้านล่างสำหรับปุ่มดูเพิ่มเติม */
}

/* Responsive Design สำหรับ Featured Grid */
@media (max-width: 1024px) {
  .featured-grid {
    max-width: 100%; /* ✅ [เปลี่ยนจาก 95vw เป็น 100%] ให้ใช้พื้นที่เต็มที่ */
    gap: 0.625rem; /* ✅ [ลดจาก 0.875rem] ให้เหมาะสมกับหน้าจอเล็ก */
    padding: 0; /* ✅ [เปลี่ยนจาก 0 0.5rem 0 0 เป็น 0] ลบ padding เพื่อให้ชิดขอบ */
    min-height: 320px; /* ✅ [เพิ่มจาก 280px เป็น 320px] เพิ่มความสูงใน tablet เพื่อรายละเอียดชัดเจนขึ้น */
  }
  
  .featured-main .novel-card {
    min-width: 260px; /* ✅ [เพิ่มจาก 240px เป็น 260px] ให้รายละเอียดชัดเจนขึ้น */
    min-height: 320px; /* ✅ [เพิ่มจาก 280px เป็น 320px] ปรับตามความสูง grid */
    max-width: 340px; /* ✅ [เพิ่มจาก 320px เป็น 340px] */
    max-height: 360px; /* ✅ [เพิ่มจาก 320px เป็น 360px] */
  }
  
  .featured-side .novel-card {
    min-width: 150px; /* ✅ [เพิ่มจาก 140px เป็น 150px] รองรับขนาดใหม่ */
    max-width: 180px; /* ✅ [เพิ่มจาก 170px เป็น 180px] */
    min-height: 200px; /* ✅ [เพิ่มจาก 180px เป็น 200px] ปรับให้สมส่วนกับการ์ดหลัก */
    max-height: 240px; /* ✅ [เพิ่มจาก 220px เป็น 240px] */
  }
  
  .featured-side .view-more-circle {
    width: 45px;
    height: 45px;
  }
  
  .featured-side .view-more-button-container {
    bottom: -2.5rem; /* ✅ ปรับสำหรับ tablet */
  }
}

/* ✅ [ปรับปรุง] Mobile breakpoint - เปลี่ยนเป็น single column เพื่อรายละเอียดชัดเจน */
@media (max-width: 768px) {
  .featured-grid {
    display: flex;
    flex-direction: column;
    gap: 1.5rem; /* ✅ [เพิ่มจาก 1rem เป็น 1.5rem] เพิ่มระยะห่างระหว่าง sections */
    min-height: unset;
    padding: 0;
    max-width: 100%;
  }
  
  .featured-main {
    width: 100%;
    justify-content: flex-start; /* ✅ [เปลี่ยนจาก center เป็น flex-start] ให้ชิดซ้ายใน mobile */
  }
  
  .featured-main .novel-card {
    min-width: unset;
    min-height: 380px; /* ✅ [เพิ่มจาก 320px เป็น 380px] เพิ่มความสูงเพื่อรองรับ aspect ratio ใหม่และข้อความ */
    max-width: 350px; /* ✅ [เพิ่มจาก 300px เป็น 350px] ขยายความกว้างเพื่อรายละเอียดชัดเจน */
    max-height: 450px; /* ✅ [เพิ่มจาก 400px เป็น 450px] เพิ่มความสูงสำหรับข้อความเพิ่มเติม */
    width: 100%;
    max-width: 400px; /* ✅ [เพิ่มใหม่] จำกัดความกว้างสูงสุดใน mobile */
    display: flex; /* ✅ [เพิ่มใหม่] ให้แน่ใจว่าเป็น flex container */
    flex-direction: column; /* ✅ [เพิ่มใหม่] จัดเรียงแนวตั้ง */
  }
  
  .featured-side {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    grid-template-rows: repeat(2, 1fr);
    gap: 0.75rem; /* ✅ [เพิ่มจาก 0.5rem เป็น 0.75rem] เพิ่มระยะห่างเพื่อไม่ให้ชิดเกินไป */
    width: 100%;
    max-width: 450px; /* ✅ [เพิ่มจาก 400px เป็น 450px] ขยายความกว้างสำหรับการ์ดที่ใหญ่ขึ้น */
    margin: 0 auto 3.5rem 0; /* ✅ [เปลี่ยนจาก 0 auto 3.5rem auto เป็น 0 auto 3.5rem 0] ให้ชิดซ้าย */
    position: relative;
  }
  
  .featured-side .novel-card {
    min-width: unset;
    max-width: unset;
    min-height: 200px; /* ✅ [เพิ่มจาก 160px เป็น 200px] เพิ่มความสูงเพื่อรายละเอียดชัดเจน */
    max-height: 240px; /* ✅ [เพิ่มจาก 200px เป็น 240px] */
    width: 100%;
  }
  
  .featured-side .view-more-circle {
    width: 42px; /* ✅ [เพิ่มจาก 40px เป็น 42px] ขยายขนาดเล็กน้อยเพื่อให้คลิกง่าย */
    height: 42px;
  }
  
  .featured-side .view-more-button-container {
    bottom: -2.5rem; /* ✅ ปรับสำหรับ mobile */
  }
}

/* ✅ [ปรับปรุง] Small mobile - ให้การ์ดยังคงมีขนาดที่เหมาะสม */
@media (max-width: 480px) {
  .featured-grid {
    gap: 1.25rem; /* ✅ [เพิ่มจาก 0.75rem เป็น 1.25rem] เพิ่มระยะห่าง */
    padding: 0; /* ✅ [เปลี่ยนจาก 0 0.5rem 0 0 เป็น 0] ลบ padding เพื่อให้ชิดขอบ */
  }
  
  .featured-main .novel-card {
    min-height: 340px; /* ✅ [เพิ่มจาก 280px เป็น 340px] เพิ่มความสูงเพื่อรองรับ aspect ratio ใหม่และข้อความ */
    max-height: 400px; /* ✅ [เพิ่มจาก 340px เป็น 400px] เพิ่มพื้นที่สำหรับรายละเอียด */
    max-width: 380px; /* ✅ [เพิ่มจาก unset เป็น 380px] จำกัดความกว้างใน small screen */
    display: flex; /* ✅ [เพิ่มใหม่] ให้แน่ใจว่าเป็น flex container */
    flex-direction: column; /* ✅ [เพิ่มใหม่] จัดเรียงแนวตั้ง */
  }
  
  .featured-side {
    gap: 0.625rem; /* ✅ [เพิ่มจาก 0.5rem เป็น 0.625rem] */
    margin: 0 auto 3rem 0; /* ✅ [เปลี่ยนจาก margin-bottom: 3rem เป็น margin: 0 auto 3rem 0] ให้ชิดซ้าย */
    max-width: 400px; /* ✅ [เพิ่มใหม่] จำกัดความกว้างใน small mobile */
  }
  
  .featured-side .novel-card {
    min-height: 180px; /* ✅ [เพิ่มจาก 140px เป็น 180px] ยังคงให้รายละเอียดชัดเจน */
    max-height: 220px; /* ✅ [เพิ่มจาก 180px เป็น 220px] */
  }
  
  .featured-side .view-more-circle {
    width: 38px; /* ✅ [เพิ่มจาก 36px เป็น 38px] ให้ใหญ่พอสำหรับการแตะ */
    height: 38px;
  }
  
  .featured-side .view-more-button-container {
    bottom: -2rem; /* ✅ [เพิ่มจาก -1.5rem เป็น -2rem] ปรับสำหรับ mobile เล็ก */
  }
}

/* View More Button Utilities - ✅ [ปรับปรุง] สำหรับปุ่มดูเพิ่มเติมแบบวงกลม */
.view-more-circle {
  width: 60px; /* ✅ [เพิ่มขนาดให้เหมาะสมกับ featured section] */
  height: 60px;
  border-radius: var(--border-radius-full);
  background: hsl(var(--card) / 0.95); /* ✅ [ปรับปรุง] ทำให้ background ใส เล็กน้อยเพื่อ glassmorphism effect */
  backdrop-filter: blur(8px); /* ✅ [เพิ่มใหม่] glassmorphism effect */
  border: 2px solid hsl(var(--primary) / 0.2); /* ✅ [ปรับปรุง] ใช้ primary color เพื่อให้โดดเด่นขึ้น */
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease-in-out;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), 0 2px 6px rgba(0, 0, 0, 0.1); /* ✅ [ปรับปรุง] เงาชัดเจนขึ้น */
  position: relative;
  overflow: hidden;
  flex-shrink: 0;
  cursor: pointer;
  text-decoration: none; /* ✅ ป้องกัน underline จาก Link */
}

.view-more-circle::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, 
    hsl(var(--primary) / 0.1) 0%, 
    hsl(var(--primary) / 0.05) 100%
  );
  opacity: 0;
  transition: opacity 0.3s ease-in-out;
}

.view-more-circle:hover {
  transform: scale(1.1);
  border-color: hsl(var(--primary) / 0.5); /* ✅ [ปรับปรุง] เพิ่มความเข้มของ primary color เมื่อ hover */
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2), 0 4px 12px rgba(0, 0, 0, 0.15); /* ✅ [ปรับปรุง] เงา hover ชัดเจนขึ้น */
}

.view-more-circle:hover::before {
  opacity: 1;
}

.view-more-circle:active {
  transform: scale(0.95);
}

.view-more-content {
  position: relative;
  z-index: 2;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  color: inherit;
  text-decoration: none; /* ✅ ป้องกัน underline */
}

/* ✅ [ปรับปรุง] Responsive สำหรับ view-more-circle */
@media (max-width: 1024px) {
  .view-more-circle {
    width: 50px;
    height: 50px;
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.15), 0 2px 5px rgba(0, 0, 0, 0.1); /* ✅ [เพิ่มใหม่] เงาปรับตามขนาดใน tablet */
  }
  
  .view-more-circle:hover {
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.2), 0 3px 10px rgba(0, 0, 0, 0.15); /* ✅ [เพิ่มใหม่] เงา hover ปรับตามขนาดใน tablet */
  }
  
  .view-more-content {
    font-size: 0.7rem;
  }
}

@media (max-width: 768px) {
  .view-more-circle {
    width: 45px;
    height: 45px;
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15), 0 1px 4px rgba(0, 0, 0, 0.1); /* ✅ [เพิ่มใหม่] เงาปรับตามขนาดใน mobile */
  }
  
  .view-more-circle:hover {
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2), 0 3px 8px rgba(0, 0, 0, 0.15); /* ✅ [เพิ่มใหม่] เงา hover ปรับตามขนาดใน mobile */
  }
  
  .view-more-content {
    font-size: 0.65rem;
  }
}

@media (max-width: 480px) {
  .view-more-circle {
    width: 40px;
    height: 40px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15), 0 1px 3px rgba(0, 0, 0, 0.1); /* ✅ [เพิ่มใหม่] เงาปรับตามขนาดใน small mobile */
  }
  
  .view-more-circle:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2), 0 2px 6px rgba(0, 0, 0, 0.15); /* ✅ [เพิ่มใหม่] เงา hover ปรับตามขนาดใน small mobile */
  }
  
  .view-more-content {
    font-size: 0.6rem;
  }
}

/* Performance optimizations - ✅ [ลดการใช้ animations] เพื่อความเร็วสูงสุด */
.gpu-accelerated {
  transform: translateZ(0);
  will-change: auto; /* ✅ [เปลี่ยนจาก transform เป็น auto] ลด GPU usage */
}

.contain-layout {
  contain: layout style;
}

/* ✅ [ลบ smooth-appear animation] เพื่อความเร็วสูงสุด */
/* Enhanced transitions - ✅ [ลดลง] เหลือเฉพาะ essential */
.hover-lift {
  transition: box-shadow 0.2s ease; /* ✅ [ลด transition] เหลือเฉพาะ shadow */
}

.hover-lift:hover {
  box-shadow: var(--shadow-lg);
}

/* Visual Novel Reader Styles */
.vn-reader {
  position: relative;
  overflow: hidden;
}

.vn-frame {
  position: relative;
  background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
}

/* ปรับปรุงการแสดงผลรูปภาพใน Visual Novel */
.vn-character-image {
  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
  transition: all 0.3s ease;
}

.vn-character-image:hover {
  filter: drop-shadow(0 6px 12px rgba(0, 0, 0, 0.4));
  transform: scale(1.02);
}

/* ปรับปรุงการแสดงผลพื้นหลัง */
.vn-background {
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  transition: opacity 0.8s ease;
}

/* ปรับปรุง gradient overlay ให้โปร่งใสมากขึ้น */
.vn-gradient-overlay {
  background: linear-gradient(
    to top,
    rgba(0, 0, 0, 0.3) 0%,
    rgba(0, 0, 0, 0.1) 50%,
    transparent 100%
  );
}

/* ปรับปรุง dialogue box */
.vn-dialogue-box {
  backdrop-filter: blur(8px);
  background: rgba(0, 0, 0, 0.6);
  border: 1px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

/* Desktop responsive styles */
@media (min-width: 1024px) {
  .vn-frame {
    min-height: 600px !important;
    max-height: 80vh !important;
  }
}

/* Mobile responsive styles */
@media (max-width: 1023px) {
  .vn-frame {
    min-height: 100vh !important;
    max-height: 100vh !important;
    border-radius: 0 !important;
    width: 100vw !important;
    max-width: none !important;
  }
}

/* Slider Styles */
.slider::-webkit-slider-thumb {
  appearance: none;
  height: 20px;
  width: 20px;
  border-radius: 50%;
  background: hsl(var(--primary));
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
  transition: all 0.2s ease;
}

.slider::-webkit-slider-thumb:hover {
  transform: scale(1.1);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.slider::-webkit-slider-track {
  height: 8px;
  border-radius: 4px;
  background: hsl(var(--secondary));
}

.slider::-moz-range-thumb {
  height: 20px;
  width: 20px;
  border-radius: 50%;
  background: hsl(var(--primary));
  cursor: pointer;
  border: none;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
  transition: all 0.2s ease;
}

.slider::-moz-range-thumb:hover {
  transform: scale(1.1);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.slider::-moz-range-track {
  height: 8px;
  border-radius: 4px;
  background: hsl(var(--secondary));
  border: none;
}

/* Dialogue Box Animation */
.dialogue-box {
  backdrop-filter: blur(8px);
  background: rgba(0, 0, 0, 0.9);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

/* Choice Button Hover Effects */
.choice-button {
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.9) 0%, rgba(37, 99, 235, 0.9) 100%);
  backdrop-filter: blur(4px);
  transition: all 0.2s ease;
}

.choice-button:hover {
  background: linear-gradient(135deg, rgba(37, 99, 235, 0.9) 0%, rgba(29, 78, 216, 0.9) 100%);
  transform: translateY(-1px);
  box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
}

/* Loading Animation */
.loading-spinner {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* Character Animation */
.character-enter {
  animation: characterEnter 0.5s ease-out;
}

@keyframes characterEnter {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Text Typewriter Effect */
.typewriter-cursor {
  /* animation: blink 1s infinite; */
  display: none;
}

@keyframes blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

.protected-image {
  /* ลบ pointer-events: none ออก เพื่อให้สามารถคลิกได้ */
  -webkit-user-drag: none;
  -khtml-user-drag: none;
  -moz-user-drag: none;
  -o-user-drag: none;
  user-drag: none;
  /* เพิ่มการป้องกันการเลือกข้อความ */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* React Flow Handle Styles */
.react-flow__handle {
  width: 16px !important;
  height: 16px !important;
  border-radius: 50% !important;
  border: 2px solid #64748b !important;
  background: #f8fafc !important;
  transition: all 0.2s ease !important;
  cursor: crosshair !important;
  z-index: 10 !important;
}

.react-flow__handle:hover {
  transform: scale(1.25) !important;
  border-color: #3b82f6 !important;
  background: #dbeafe !important;
  box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.2) !important;
}

.react-flow__handle.connectingto {
  border-color: #10b981 !important;
  background: #d1fae5 !important;
}

.react-flow__handle.connectingfrom {
  border-color: #f59e0b !important;
  background: #fef3c7 !important;
}

.react-flow__handle-top {
  top: -8px !important;
}

.react-flow__handle-bottom {
  bottom: -8px !important;
}

.react-flow__handle-left {
  left: -8px !important;
}

.react-flow__handle-right {
  right: -8px !important;
}

/* Dark mode handles */
.dark .react-flow__handle {
  background: #1e293b !important;
  border-color: #475569 !important;
}

.dark .react-flow__handle:hover {
  border-color: #60a5fa !important;
  background: #1e40af !important;
  box-shadow: 0 0 0 4px rgba(96, 165, 250, 0.2) !important;
}

.dark .react-flow__handle.connectingto {
  border-color: #34d399 !important;
  background: #065f46 !important;
}

.dark .react-flow__handle.connectingfrom {
  border-color: #fbbf24 !important;
  background: #92400e !important;
}